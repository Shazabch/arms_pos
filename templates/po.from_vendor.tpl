{*REVISION HISTORY=================3/26/2008 5:38:37 PM gary- refresh the session every 25 minutes to avoid timeout.11/11/2013 11:02 AM Fithri- add missing indicator for compulsory field*}{include file=header.tpl}{literal}<script>function load_vendor_sku(){	$('sku_table').innerHTML = '<img src=ui/clock.gif align=absmiddle> Loading...';	new Ajax.Updater("sku_table","po.from_vendor.php",{			method: 'post',			parameters: Form.serialize(document.f_a) + '&a=ajax_load_sku',			evalScripts: true	})}// expand the item's varietiesfunction toggle_vendor_sku(sku_id,id){	if ($('xp'+id).innerHTML == "varieties"){		$('xp'+id).innerHTML = "hide varieties";		$('cb'+id).disabled = true;		$('cb'+id).checked = false;		insert_after = $('li'+id);		new Ajax.Updater(insert_after,"po.from_vendor.php",{				method:'post',				parameters: '&a=ajax_expand_sku&sku_id='+sku_id,			    evalScripts: true,		 	    insertion: Insertion.Bottom		});  	}  	else{  		$('xp'+id).innerHTML = "varieties";		$('cb'+id).disabled = false;  		Element.remove('ul'+sku_id);	}}function do_generate_po(){		var f_s_serialize = Form.serialize(document.f_s);	if (f_s_serialize == ''){		alert('You have not selected any item');		return;	}		if (!confirm('Click OK to confirm generate PO from selected SKU.')){		return;			}		$('sku_table').innerHTML = '<img src=ui/clock.gif align=absmiddle> Generating PO...';		params = Form.serialize(document.f_a) + '&' + f_s_serialize;		new Ajax.Updater("sku_table","po.from_vendor.php",{			method: 'post',			parameters: params + '&a=ajax_generate_po',			evalScripts: true	});	}//refresh the session each 25 minutes to avoid timeout when user take long time (>30 mins) to select sku. (request by SLLEE)new Ajax.PeriodicalUpdater('', "dummy.php", {frequency:1500});</script>{/literal}<h1>PO from Vendor SKU</h1>{if $config.po_set_max_items}<p>Selected SKU will be saved into multiple PO with {php}echo $config[po_set_max_items]{/php} items for each PO.</p>{/if}<form name=f_a><table  border=0 cellspacing=0 cellpadding=4><tr>	<td><b>Vendor</b></td>	<td>    	<input name="vendor_id" size=1 value="{$form.vendor_id}" readonly>		<input id="autocomplete_vendor" name="vendor" value="{$form.vendor}" size=50>		<div id="autocomplete_vendor_choices" class="autocomplete"></div>		<img src=ui/rq.gif align=absbottom title="Required Field">	</td></tr><tr>	<td><b>Department</b></td>	<td>		<select name="department_id">		{section name=i loop=$dept}		<option value={$dept[i].id} {if $form.department_id eq $dept[i].id}selected{/if}>{$dept[i].description}</option>		{/section}		</select> <span><img src="ui/rq.gif" align="absbottom" title="Required Field"></span>	</td></tr></table><p align=center><input class="btn btn-primary" type=button value="Load SKU" onclick="load_vendor_sku()"> <input class="btn btn-error" type=button value="Close" onclick="document.location='po.php'"></p></form><div id="sku_table"></div>{include file=footer.tpl}<script>{literal}new Ajax.Autocompleter("autocomplete_vendor", "autocomplete_vendor_choices", "ajax_autocomplete.php?a=ajax_search_vendor", { afterUpdateElement: function (obj, li) { document.f_a.vendor_id.value = li.title; }});{/literal}</script>